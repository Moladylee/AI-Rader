name: 'Sync Upstream Template'
on:
  workflow_dispatch:
  schedule:
    - cron: '0 3 * * 1'

# === æ–°å¢ï¼šå…¨å±€ç¯å¢ƒå˜é‡ï¼Œç”¨PATè¦†ç›–é»˜è®¤ä»¤ç‰Œ ===
env:
  GITHUB_TOKEN: ${{ secrets.PAT_TOKEN }}

permissions:
  contents: write
  pull-requests: write

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          # é‡è¦ï¼šåˆ é™¤æˆ–æ³¨é‡Šæ‰æ˜¾å¼çš„ token é…ç½®ï¼Œè®©å…¶è‡ªåŠ¨ä½¿ç”¨ä¸Šæ–¹çš„ GITHUB_TOKEN
          # token: ${{ secrets.GITHUB_TOKEN }}

      - name: Sync from TrendRadar template
        uses: AndreasAugustin/actions-template-sync@v0.8.0
        with:
          source_repo: sansan0/TrendRadar
          source_repo_path: /
          upstream_branch: main   # è¯·ç¡®è®¤
          target_branch: master   # è¯·ç¡®è®¤
          # æ­¤å¤„ä»å¯ä½¿ç”¨ PAT_TOKENï¼Œä½†ä¸Šæ–¹çš„å…¨å±€è¦†ç›–å·²ç¡®ä¿æ‰€æœ‰è°ƒç”¨éƒ½ä½¿ç”¨å®ƒ
          github_token: ${{ secrets.PAT_TOKEN }}
          pr_title: 'ğŸ”„ åŒæ­¥ä¸Šæ¸¸TrendRadaræ¨¡æ¿æ›´æ–°'
          pr_labels: 'automated-sync,upstream'
          excluded_files: |
            config.yaml
            frequency_words.txt
